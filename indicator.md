
**附录 A：数据定义与假设**
- 数据实体
  - 任务 Task：`task_id`、`category`(学习/工作/创作等)、`created_at`、`planned_focus_minutes`、`completed_at`(可空)、`is_completed`
  - 专注会话 Focus Session：`session_id`、`task_id`、`start_time`、`end_time`、`interruptions_count`、`notes`
  - 中断事件 Interruption：`event_id`、`session_id`、`timestamp`、`type`(通知/社交/系统等)、`duration_seconds`
- 基础口径与假设
  - 实际专注时长 Actual Focus = ∑(会话`end_time - start_time`)（分钟）
  - 深度专注 Deep Focus 阈值：单次连续≥25分钟（可配置，默认25）
  - 时段划分：早晨 06:00–12:00；下午 12:00–18:00；晚上 18:00–24:00（可配置）
  - 中断频率标准化：每专注小时的中断次数 = `interruptions_count / (Actual Focus Minutes / 60)`
  - 趋势比较口径：周一至周日为一周；月为自然月；对比使用 `(当前 - 对比) / 对比 × 100%`
  - 时间维度：日/周/月均以任务与会话时间戳汇总口径计算

**附录 B：基础指标 Baseline Metrics**
- 指标名称：专注任务提出数量 (Focus Tasks Created)
  - 公式/方法：统计周期内新建任务数
  - 计量单位：个
  - 统计维度：日/周/月
  - 参考阈值：无固定阈值，建议与完成率/负荷联动分析
  - 可视化建议：柱状图（按日/周/月）

- 指标名称：任务完成率 (Task Completion Rate)
  - 公式/方法：`已完成任务数 ÷ 总任务数 × 100%`
  - 计量单位：%
  - 统计维度：日/周/月
  - 参考阈值：优秀≥80%，良好60–79%，需改进<60%
  - 可视化建议：柱状图/仪表盘；随时间折线

- 指标名称：总专注时长 (Total Focus Time)
  - 公式/方法：`∑(各会话时长分钟)`
  - 计量单位：分钟
  - 统计维度：日/周/月
  - 参考阈值（每日）：优秀≥240，良好120–239，需改进<120
  - 可视化建议：折线图（时间序列）、累计面积图

- 指标名称：平均任务遗留天数 (Avg Outstanding Task Age)
  - 公式/方法：未完成任务的平均遗留天数 = `平均值(当前日期 - created_at)`
  - 计量单位：天
  - 统计维度：日/周/月（按快照口径）
  - 参考阈值：优秀≤3，良好4–7，需改进>7
  - 可视化建议：箱线图（按类别）、随时间折线

**附录 C：新增深度指标 Advanced Metrics**
- 指标名称：专注效率指数 (Focus Efficiency Index)
  - 公式/方法：`(实际专注时长 ÷ 计划专注时长) × 100%`；当计划=0时，若有实际专注则记为100%，否则空值
  - 计量单位：%
  - 统计维度：日/周/月，或按任务
  - 参考阈值：优秀≥90%，良好70–89%，需改进<70%
  - 可视化建议：雷达图（与完成率、深度时长对比）、折线图

- 指标名称：中断频率 (Interruption Frequency)
  - 公式/方法：标准化频率 = `中断次数 ÷ (实际专注时长分钟 / 60)`；同时记录绝对中断次数
  - 计量单位：次/小时（主）；次（辅）
  - 统计维度：日/周/月；按会话
  - 参考阈值（次/小时）：优秀≤0.5，良好0.5–1.0，需改进>1.0
  - 可视化建议：柱状图（次/小时），会话桑基图（中断类型）

- 指标名称：深度专注时长 (Deep Focus Duration)
  - 公式/方法：`∑(单次≥25分钟的会话时长)`；并可计算深度专注占比 = `深度专注时长 ÷ 总专注时长 × 100%`
  - 计量单位：分钟；%
  - 统计维度：日/周/月；按任务
  - 参考阈值（占比）：优秀≥50%，良好30–49%，需改进<30%
  - 可视化建议：堆叠面积图（深度vs非深度）、热力图（按小时）

- 指标名称：时段分布分析 (Time-of-Day Distribution)
  - 公式/方法：早/午/晚的专注时长占比 = 各时段`专注时长 ÷ 总专注时长 × 100%`
  - 计量单位：%
  - 统计维度：日/周/月
  - 参考阈值：无固定阈值；建议结合个体最佳时段识别（见最佳专注日）
  - 可视化建议：堆叠柱状图/玫瑰图；周热力日历

- 指标名称：任务类型分布 (Task Category Distribution)
  - 公式/方法：各类别`专注时长 ÷ 总专注时长 × 100%`；或按任务数占比
  - 计量单位：%
  - 统计维度：日/周/月；按类别
  - 参考阈值：无固定阈值；建议结合目标配比（如学习≥50%）
  - 可视化建议：饼图/旭日图；堆叠条形图

- 指标名称：专注质量评分 (Focus Quality Score)
  - 公式/方法：
    - 先归一化：`完成率_n = 完成率`，`效率指数_n = 效率指数`，`中断频率_n = max(0, 1 - min(1, 次/小时))`
    - 综合得分（0–1）：`Q = w1*完成率_n + w2*效率指数_n + w3*中断频率_n`，默认权重`w1=0.4, w2=0.4, w3=0.2`（可调，且w合计=1）
    - 映射到1–5分：`Score = round(1 + 4*Q)`（或等距分段）
  - 计量单位：分（1–5）
  - 统计维度：日/周/月；按任务
  - 参考阈值：优秀≥4.5，良好3.5–4.4，需改进<3.5
  - 可视化建议：雷达图（维度与权重）、评分分布直方图

**附录 D：趋势分析指标 Trend Metrics**
- 指标名称：周环比变化 (WoW Change)
  - 公式/方法：`(本周指标 - 上周指标) ÷ 上周指标 × 100%`；上周=0时返回空或使用绝对变化
  - 计量单位：%
  - 统计维度：周
  - 参考阈值：增长>10%（积极），-5%～+10%（稳定），<-5%（下降）
  - 可视化建议：瀑布图；折线图（多指标并列）

- 指标名称：月同比变化 (MoM Change)
  - 公式/方法：`(本月指标 - 上月指标) ÷ 上月指标 × 100%`
  - 计量单位：%
  - 统计维度：月
  - 参考阈值：同上，结合季节性修正（可选）
  - 可视化建议：柱状图（对比）、季节性分解折线

- 指标名称：最佳专注日 (Best Focus Day)
  - 公式/方法：在统计周期内，按综合评分`Score`或加权组合（深度占比50%、效率指数30%、总时长20%）排名取Top 1；并记录时段与类别特征
  - 计量单位：日期；附带分数
  - 统计维度：周/月
  - 参考阈值：无固定阈值；用于个体节律识别与复盘
  - 可视化建议：高亮日历热力图；Top日详情卡片

- 指标名称：专注稳定性 (Focus Stability)
  - 公式/方法：
    - 日专注时长的标准差`σ_time`与变异系数`CV_time = σ_time / 平均时长`
    - 效率指数的标准差`σ_eff`与变异系数`CV_eff = σ_eff / 平均效率`
    - 综合稳定性指数（0–1）：`S = 1 - min(1, 0.5*CV_time + 0.5*CV_eff)`（越高越稳定）
  - 计量单位：无量纲（指数）/ 标准差
  - 统计维度：周/月
  - 参考阈值：`CV < 0.2`（优秀），`0.2–0.35`（良好），`>0.35`（需改进）
  - 可视化建议：箱线图/小提琴图；滚动窗口稳定性折线

**附录 E：可视化建议总览 Visualization Summary**
- 趋势/时间序列：折线图、面积图、季节性分解
- 分布/比例：堆叠柱、饼/旭日、玫瑰图
- 质量/多维：雷达图、瀑布图、仪表盘
- 会话级：桑基图（中断流向）、热力图（小时×日）
- 稳定性与差异：箱线图、小提琴图、CV折线

**附录 F：扩展性设计 Extensibility**
- 预留自定义指标接口
  - 指标定义：`name_zh`、`name_en`、`formula_type`(聚合/比率/分段/指数)、`input_fields`(任务/会话字段)、`time_granularity`(日/周/月)、`thresholds`(优秀/良好/改进)、`visualization`
  - 公式引擎：支持表达式（四则/条件/聚合），内置函数如`sum`,`avg`,`stdev`,`ratio`，支持过滤与分组
  - 示例：无干扰率（No-Interruption Ratio）=`无中断会话数 ÷ 会话总数 × 100%`
- 支持原始数据导出功能
  - 导出格式：CSV/JSON；实体：任务、会话、中断事件
  - 字段选择：可选列与筛选条件（时间窗、类别、时段）
  - 数据一致性：导出使用同一聚合口径；版本号与口径说明随文件附带
- 指标权重调整机制
  - 权重配置：如`专注质量评分`的`w1,w2,w3`通过设置或UI滑杆调整；约束`∑w=1`且`w≥0`
  - 方案管理：支持保存/切换权重方案（默认/考试周/项目冲刺）
  - 效果评估：调整前后评分分布对比与稳定性变化
- 指标关联性分析框架
  - 方法：皮尔逊相关系数`r`（或斯皮尔曼ρ用于非正态）、偏相关（控制时段/类别）、简易回归（如中断频率→效率指数）
  - 可视化：散点图（拟合线）、相关热力矩阵、重要性条形图
  - 解释：显著性标注（p值）、多重共线性提醒、因果避免声明

**附录 G：数据处理与边界情况 Data Handling**
- 缺失与零值：分母为0时返回空值并标注；可显示绝对量辅指标
- 去极端：Winsorize或IQR法剔除极端会话（如>8小时）
- 去重与合并：重叠会话按时间线合并；跨日会话按切片计入各日
- 时区与节假日：本地时区；节假日可提供单独切片分析
- 隐私：导出脱敏（不含备注敏感信息），仅统计字段

**附录 H：示例与落地建议 Implementation Notes**
- 推荐默认阈值汇总（可按人群与目标微调）
  - 完成率：≥80%优秀；效率指数：≥90%优秀；中断频率：≤0.5次/小时优秀
  - 深度专注占比：≥50%优秀；每日总专注时长：≥240分钟优秀
  - 稳定性：CV<0.2优秀
- 仪表盘分区
  - 概览：完成率、效率指数、总时长、质量评分
  - 深度洞察：深度专注占比、时段分布、类型分布
  - 趋势：周环比、月同比、最佳专注日
  - 稳定性：CV与滚动稳定性
- 复盘流程建议
  - 每周：查看最佳专注日与时段，微调日程
  - 每月：评估权重方案与目标配比，优化策略
  - 异常周：检查中断类型贡献，设置干扰屏蔽策略

