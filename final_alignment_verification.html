<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ—¶é—´å¯¹é½ä¿®å¤éªŒè¯</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        .test-info {
            background: #f0f9ff;
            border: 2px solid #0ea5e9;
            border-radius: 8px;
            padding: 15px;
            margin: 20px 0;
        }
        
        .alignment-indicator {
            position: absolute;
            left: 0;
            right: 0;
            height: 2px;
            background: rgba(239, 68, 68, 0.8);
            z-index: 100;
            pointer-events: none;
        }
        
        .measurement-overlay {
            position: fixed;
            top: 10px;
            right: 10px;
            background: rgba(0, 0, 0, 0.9);
            color: white;
            padding: 10px;
            border-radius: 6px;
            font-family: monospace;
            font-size: 12px;
            z-index: 1000;
            max-width: 300px;
        }
        
        .status-good { color: #10b981; }
        .status-bad { color: #ef4444; }
    </style>
</head>
<body>
    <div class="container">
        <div class="test-info">
            <h1>ğŸ¯ æ—¶é—´å¯¹é½ä¿®å¤éªŒè¯</h1>
            <p><strong>ä¿®å¤å†…å®¹:</strong> ä¸º.time-colæ·»åŠ äº†margin-topï¼Œä½¿å·¦ä¾§æ—¶é—´åˆ»åº¦ä¸å³ä¾§æ—¥å†å†…å®¹å¯¹é½</p>
            <ul>
                <li>æ¡Œé¢ç«¯ (>768px): margin-top: 32px</li>
                <li>ä¸­å± (481-768px): margin-top: 26px</li>
                <li>å°å± (â‰¤480px): margin-top: 20px</li>
            </ul>
        </div>
        
        <div class="calendar-section">
            <div class="calendar-header">ğŸ“… æœ¬å‘¨è¯¾ç¨‹å®‰æ’</div>
            <div class="calendar-grid">
                <div class="time-col" id="timeCol">
                    <!-- æ—¶é—´åˆ»åº¦å°†ç”±JavaScriptç”Ÿæˆ -->
                </div>
                
                <div class="day-col">
                    <div class="day-header">å‘¨ä¸€ 12/23</div>
                    <div class="day-body" style="position: relative;">
                        <!-- 8:00-9:00 è¯¾ç¨‹ -->
                        <div class="event course" style="top: 48px; height: 48px;">
                            <span class="title">é«˜ç­‰æ•°å­¦</span>
                            <div class="meta">8:00 - 9:00</div>
                        </div>
                        
                        <!-- 10:00-12:00 è¯¾ç¨‹ -->
                        <div class="event course" style="top: 144px; height: 96px;">
                            <span class="title">è®¡ç®—æœºç½‘ç»œ</span>
                            <div class="meta">10:00 - 12:00</div>
                        </div>
                        
                        <!-- 14:00-15:00 ä¸“æ³¨ä»»åŠ¡ -->
                        <div class="event focus" style="top: 336px; height: 48px;">
                            <span class="title">é¡¹ç›®å¼€å‘</span>
                            <div class="meta">14:00 - 15:00</div>
                        </div>
                        
                        <!-- å¯¹é½æŒ‡ç¤ºçº¿ -->
                        <div class="alignment-indicator" style="top: 48px;" title="8:00 å¯¹é½çº¿"></div>
                        <div class="alignment-indicator" style="top: 144px;" title="10:00 å¯¹é½çº¿"></div>
                        <div class="alignment-indicator" style="top: 336px;" title="14:00 å¯¹é½çº¿"></div>
                    </div>
                </div>
                
                <div class="day-col">
                    <div class="day-header">å‘¨äºŒ 12/24</div>
                    <div class="day-body" style="position: relative;">
                        <!-- 9:00-11:00 è¯¾ç¨‹ -->
                        <div class="event course" style="top: 96px; height: 96px;">
                            <span class="title">æ•°æ®ç»“æ„</span>
                            <div class="meta">9:00 - 11:00</div>
                        </div>
                        
                        <!-- å¯¹é½æŒ‡ç¤ºçº¿ -->
                        <div class="alignment-indicator" style="top: 96px;" title="9:00 å¯¹é½çº¿"></div>
                    </div>
                </div>
                
                <div class="day-col">
                    <div class="day-header">å‘¨ä¸‰ 12/25</div>
                    <div class="day-body" style="position: relative;">
                        <!-- 13:00-15:00 ä¸“æ³¨ä»»åŠ¡ -->
                        <div class="event focus" style="top: 288px; height: 96px;">
                            <span class="title">ç®—æ³•ç»ƒä¹ </span>
                            <div class="meta">13:00 - 15:00</div>
                        </div>
                        
                        <!-- å¯¹é½æŒ‡ç¤ºçº¿ -->
                        <div class="alignment-indicator" style="top: 288px;" title="13:00 å¯¹é½çº¿"></div>
                    </div>
                </div>
                
                <div class="day-col">
                    <div class="day-header">å‘¨å›› 12/26</div>
                    <div class="day-body"></div>
                </div>
                
                <div class="day-col">
                    <div class="day-header">å‘¨äº” 12/27</div>
                    <div class="day-body"></div>
                </div>
                
                <div class="day-col">
                    <div class="day-header">å‘¨å…­ 12/28</div>
                    <div class="day-body"></div>
                </div>
                
                <div class="day-col">
                    <div class="day-header">å‘¨æ—¥ 12/29</div>
                    <div class="day-body"></div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="measurement-overlay" id="measurementOverlay"></div>
    
    <script src="script.js"></script>
    <script>
        // ç”Ÿæˆæ—¶é—´åˆ»åº¦
        function renderTimeCol() {
            const timeCol = document.getElementById('timeCol');
            timeCol.innerHTML = '';
            for (let h = 7; h <= 23; h++) {
                const slot = document.createElement('div');
                slot.className = 'time-slot';
                slot.textContent = `${h}:00`;
                timeCol.appendChild(slot);
            }
        }
        
        function measureAlignment() {
            const timeSlots = document.querySelectorAll('.time-slot');
            const events = document.querySelectorAll('.event');
            const indicators = document.querySelectorAll('.alignment-indicator');
            
            let alignmentResults = [];
            
            // æ£€æŸ¥å…³é”®æ—¶é—´ç‚¹çš„å¯¹é½
            const checkPoints = [
                { hour: 8, slotIndex: 1, eventIndex: 0, name: '8:00 é«˜ç­‰æ•°å­¦' },
                { hour: 10, slotIndex: 3, eventIndex: 1, name: '10:00 è®¡ç®—æœºç½‘ç»œ' },
                { hour: 14, slotIndex: 7, eventIndex: 2, name: '14:00 é¡¹ç›®å¼€å‘' },
                { hour: 9, slotIndex: 2, eventIndex: 3, name: '9:00 æ•°æ®ç»“æ„' },
                { hour: 13, slotIndex: 6, eventIndex: 4, name: '13:00 ç®—æ³•ç»ƒä¹ ' }
            ];
            
            checkPoints.forEach(point => {
                if (timeSlots[point.slotIndex] && events[point.eventIndex]) {
                    const slotRect = timeSlots[point.slotIndex].getBoundingClientRect();
                    const eventRect = events[point.eventIndex].getBoundingClientRect();
                    
                    const offset = Math.abs(slotRect.top - eventRect.top);
                    const isAligned = offset < 3; // å…è®¸3pxè¯¯å·®
                    
                    alignmentResults.push({
                        name: point.name,
                        offset: offset.toFixed(1),
                        aligned: isAligned
                    });
                }
            });
            
            // æ˜¾ç¤ºæµ‹é‡ç»“æœ
            const overlay = document.getElementById('measurementOverlay');
            const screenWidth = window.innerWidth;
            const breakpoint = screenWidth <= 480 ? 'å°å±' : 
                             screenWidth <= 768 ? 'ä¸­å±' : 'æ¡Œé¢';
            
            const alignedCount = alignmentResults.filter(r => r.aligned).length;
            const totalCount = alignmentResults.length;
            
            overlay.innerHTML = `
                <strong>å¯¹é½éªŒè¯ç»“æœ</strong><br>
                å±å¹•: ${screenWidth}px (${breakpoint})<br>
                å¯¹é½ç‡: ${alignedCount}/${totalCount}<br>
                <br>
                ${alignmentResults.map(r => 
                    `<span class="${r.aligned ? 'status-good' : 'status-bad'}">
                        ${r.aligned ? 'âœ…' : 'âŒ'} ${r.name}<br>
                        åç§»: ${r.offset}px
                    </span>`
                ).join('<br>')}
                <br>
                <small>è°ƒæ•´çª—å£å¤§å°æµ‹è¯•ä¸åŒæ–­ç‚¹</small>
            `;
        }
        
        // é¡µé¢åŠ è½½åæ‰§è¡Œ
        window.addEventListener('load', () => {
            renderTimeCol();
            setTimeout(measureAlignment, 200);
        });
        
        // çª—å£å¤§å°æ”¹å˜æ—¶é‡æ–°æµ‹é‡
        window.addEventListener('resize', () => {
            setTimeout(measureAlignment, 200);
        });
        
        // å®šæœŸæ›´æ–°æµ‹é‡ç»“æœ
        setInterval(measureAlignment, 2000);
    </script>
</body>
</html>